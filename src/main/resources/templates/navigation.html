<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

  <body>

    <div th:fragment="navigation">

      <nav class="navbar navbar-default">
          <div class="container-fluid">

              <div class="navbar-header">
                  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                          data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                          点我
                      <span class="sr-only">切换导航，小屏幕显示</span>
                  </button>
                  <a class="navbar-brand" href="/">哈哈社区</a>
              </div>

              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                  <form class="navbar-form navbar-left">
                      <div class="form-group">
                          <input type="text" class="form-control" name="search" th:value="${search}" placeholder="搜索问题" autocomplete="off">
                      </div>
                      <button type="submit" class="btn btn-default">搜索</button>
                  </form>


                  <ul class="nav navbar-nav navbar-right">
                      <li th:if="${session.user != null}">
                          <a href="/publish">发布问题</a>
                      </li>
                      <li><a href="/profile/replies">通知 <span class="badge" th:text="${session.unreadCount}"></span></a>
                        </li>

                      <li th:if="${session.user == null}">
                              <a
                              href="https://github.com/login/oauth/authorize?client_id=12b7415968a1fbb1aecd&redirect_uri=http://localhost:8088/callback&scope=user&state=1">GitHub登录
                              </a>
                      </li>
                      <li th:if="${session.user == null}"><a href="/login">登录</a></li>
                      <li th:if="${session.user == null}"><a href="/register">注册</a></li>
                      <li class="dropdown" th:if="${session.user!=null}">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                             aria-expanded="false">
                              <span th:text="${session.user.getName()}"></span>
                              <span class="caret"></span>
                          </a>
                          <ul class="dropdown-menu" role="navigation">
                              <li><a href="/profile/questions">我的问题</a></li>
                              <li><a href="#">个人资料</a></li>
                              <li><a href="/logout">退出登录</a></li>
                          </ul>
                      </li>
                  </ul>
              </div>
          </div>
      </nav>

    </div>

  </body>

</html>